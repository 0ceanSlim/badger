{{define "view"}}
<div
  class="absolute flex flex-col items-center md:flex-row right-4 top-20 md:top-12 md:right-64"
>
  <button
    hx-get="/badgeform"
    class="p-2 mb-4 mr-2 text-sm text-white bg-purple-500 rounded-lg md:text-base md:mb-0 hover:bg-purple-700"
    hx-swap="outerHTML"
    hx-target="body"
  >
    Create a Badge!
  </button>
  <div class="relative">
    <img
      src="/static/img/hamburger.png"
      alt="Hamburger Menu"
      class="w-6 h-6 cursor-pointer md:w-10 md:h-10"
      onclick="toggleDropdown()"
    />
    <div
      id="dropdown"
      class="absolute right-0 z-20 hidden w-48 mt-2 text-sm rounded-md shadow-xl bg-bgSecondary text-textPrimary"
    >
      <a
        href="relay-list"
        class="block px-4 py-2 hover:text-textInverted hover:bg-bgInverted hover:rounded-md"
        hx-trigger="click"
        hx-get="/relay-list"
        hx-swap="outerHTML"
        hx-target="body"
        >Relays</a
      >
      <a
        href="logout"
        class="block px-4 py-2 hover:text-textInverted hover:bg-bgInverted hover:rounded-md"
        hx-trigger="click"
        hx-get="/logout"
        hx-swap="outerHTML"
        hx-target="body"
        >Logout</a
      >
    </div>
  </div>
</div>
<main class="flex flex-col my-16 md:my-32">
  <div class="flex flex-col items-center mb-8 md:flex-row md:items-start">
    <img
      src="{{.Picture}}"
      alt="Profile Picture"
      class="w-24 h-24 mx-6 mb-4 border-4 rounded-lg md:w-32 md:h-32 md:mb-0 border-bgInverted"
    />
    <div class="text-center md:text-left">
      <h2 class="mb-2 text-xl font-semibold md:text-2xl">{{.DisplayName}}</h2>
      <p class="max-w-xs md:max-w-md text-textMuted">{{.About}}</p>
    </div>
  </div>

  <!-- Tabbed Container -->
  <div
    class="w-full max-w-4xl p-4 mx-auto bg-bgSecondary text-textPrimary rounded-lg shadow-md"
  >
    <div class="flex mb-4 border-b border-bgInverted">
      <button
        hx-trigger="load,click"
        hx-get="/component/collected-badges.html"
        hx-target="#tab-content"
        hx-swap="innerHTML"
        class="px-4 py-2 text-sm font-semibold text-white bg-purple-500 rounded-t-md hover:bg-purple-700"
      >
        Collected Badges
      </button>
      <button
        hx-get="/component/awarded-badges.html"
        hx-target="#tab-content"
        hx-swap="innerHTML"
        class="px-4 py-2 ml-2 text-sm font-semibold text-white bg-purple-500 rounded-t-md hover:bg-purple-700"
      >
        Awarded Badges
      </button>
      <button
        hx-get="/component/created-badges.html"
        hx-target="#tab-content"
        hx-swap="innerHTML"
        class="px-4 py-2 ml-2 text-sm font-semibold text-white bg-purple-500 rounded-t-md hover:bg-purple-700"
      >
        Created Badges
      </button>
    </div>

    <!-- Container for Tab Content -->
    <div id="tab-content" class="p-4">{{.BadgeTab}}</div>
  </div>

  <script>
    function toggleDropdown() {
      const dropdown = document.getElementById("dropdown");
      dropdown.classList.toggle("hidden");
    }

    // Check if the Nostr extension is available
    window.onload = function () {
      if (!window.nostr) {
        alert("Nostr extension not available. Redirecting to login...");
        window.location.href = "/login";
      }
    };
  </script>
</main>
{{end}}
